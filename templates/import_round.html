<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Import Round</title>
    <style>
      body { font-family: system-ui, sans-serif; max-width: 800px; margin: 2rem auto; }
      table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
      th, td { border: 1px solid #ccc; padding: .5rem; text-align: left; }
    </style>
  </head>
  <body>
    <h1>Import Round for Tournament {{ tournament.id }}</h1>

    {% if preview %}
      <h2>Preview Round {{ round_num }}</h2>
      <form method="POST" action="{{ url_for('confirm_import_round', tid=tournament.id) }}">
        <input type="hidden" name="round_num" value="{{ round_num }}">
        <input type="hidden" name="count" value="{{ matches|length }}">
        <table>
          <tr><th>Player</th><th>Opponent</th><th>Result</th></tr>
          {% for m in matches %}
          <tr>
            <td>{{ m.player }}<input type="hidden" name="player_{{ loop.index0 }}" value="{{ m.player }}"></td>
            <td>{{ m.opponent or "Bye" }}<input type="hidden" name="opponent_{{ loop.index0 }}" value="{{ m.opponent or "" }}"></td>
            <td>{{ m.result }}<input type="hidden" name="result_{{ loop.index0 }}" value="{{ m.result }}"></td>
          </tr>
          {% endfor %}
        </table>
        <button type="submit">Confirm Import</button>
      </form>
    {% else %}
      <form method="POST" enctype="multipart/form-data">
        <label for="round_num">Round Number:</label>
        <input type="number" id="round_num" name="round_num" min="1" required>
        <br><br>
        <label for="pdf">Upload Round PDF:</label>
        <input type="file" id="pdf" name="pdf" accept="application/pdf" required>
        <br><br>
        <button type="submit">Parse PDF</button>
      </form>
    {% endif %}
  </body>
</html>
