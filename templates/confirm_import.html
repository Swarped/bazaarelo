<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Confirm Tournament Import</title>
    <style>
      body { font-family: system-ui, sans-serif; max-width: 800px; margin: 2rem auto; }
      table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
      th, td { border: 1px solid #ccc; padding: .5rem; text-align: center; }
      th { background: #f0f0f0; }
      tr:nth-child(even) { background-color: #f9f9f9; }
      tr.highlight { background-color: #ffeeba; font-weight: bold; }

      .elo-pos { color: green; font-weight: bold; }
      .elo-neg { color: red; font-weight: bold; }

      label { display: block; margin-top: 1rem; font-weight: bold; }

      .btn-confirm {
        margin-top: 2rem;
        padding: .75rem 1.5rem;
        font-size: 1rem;
        background: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .btn-confirm:hover { background: #45a049; }
    </style>
  </head>
  <body>
    <h1>Confirm Tournament Import</h1>

    <h2>Final Standings (Preview)</h2>
    <p><strong>Note:</strong> Players highlighted below are within the current Top Cut setting.</p>

    <table>
      <tr>
        <th>Rank</th>
        <th>Player</th>
        <th>Wins</th>
        <th>Draws</th>
        <th>Losses</th>
        <th>Points</th>
        <th>Elo Î”</th>
      </tr>
      {% for s in standings %}
      <tr class="{% if loop.index <= (tournament.top_cut or 0) %}highlight{% endif %}">
        <td>{{ loop.index }}</td>
        <td>{{ s.player.name }}</td>
        <td>{{ s.wins }}</td>
        <td>{{ s.draws }}</td>
        <td>{{ s.losses }}</td>
        <td>{{ s.points }}</td>
        <td>
          <span class="{{ 'elo-pos' if s.elo_delta > 0 else 'elo-neg' if s.elo_delta < 0 else '' }}">
            {{ s.elo_delta }}
          </span>
        </td>
      </tr>
      {% endfor %}
    </table>

    <form method="POST">
      <label for="top_cut">Playoff Top Cut:</label>
      <select name="top_cut" id="top_cut">
        <option value="">Default (auto)</option>
        <option value="4" {% if tournament.top_cut == 4 %}selected{% endif %}>Top 4</option>
        <option value="8" {% if tournament.top_cut == 8 %}selected{% endif %}>Top 8</option>
        <option value="16" {% if tournament.top_cut == 16 %}selected{% endif %}>Top 16</option>
        <option value="32" {% if tournament.top_cut == 32 %}selected{% endif %}>Top 32</option>
      </select>

      <button type="submit" class="btn-confirm">Confirm and Apply Elo</button>
    </form>
  </body>
</html>
