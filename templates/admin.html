<h1>Admin Panel</h1>

<h2>Add Admin by Email</h2>
<form method="POST">
  <input type="hidden" name="action" value="add_by_email">
  <input type="email" name="email" placeholder="Enter email" required>
  <button type="submit" class="btn btn-primary">Add Admin</button>
</form>

<hr>

<table>
  <tr><th>Name</th><th>Email</th><th>Admin?</th><th>Actions</th></tr>
  {% for u in users %}
  <tr>
    <td>{{ u.name }}</td>
    <td>{{ u.email }}</td>
    <td>{{ "Yes" if u.is_admin else "No" }}</td>
    <td>
      <form method="POST" style="display:inline;">
        <input type="hidden" name="user_id" value="{{ u.id }}">
        <input type="hidden" name="make_admin" value="{{ 'false' if u.is_admin else 'true' }}">
        {% if u.is_admin %}
          <button type="submit" class="btn btn-danger">Remove Admin</button>
        {% else %}
          <button type="submit" class="btn btn-primary">Make Admin</button>
        {% endif %}
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
